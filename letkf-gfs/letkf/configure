#!/bin/bash

# source ../../config/machine.sh
# source ../../config/$MACHINE.fortran.sh
# source ../../config/$MACHINE.netcdf.sh
# source ../../config/$MACHINE.mpi.sh
echo "#============================================================"
echo "# GFS-LETKF build configuration"
echo "# Searching for dependencies to create Makefile..."
echo "# You will see warnings that 'sigio_module' source was not found,"
echo "#   ignore that error"
echo "#============================================================"
echo ""
export F90=mpiifort
export FMKMF_F90="$F90 -I../../lib-ncep/incmod/sigio_4 -O3"
export FMKMF_LINKOPTS="netlib.o -L../../lib-ncep/lib -lsigio_4 -lsp_4 -mkl"
./fmkmf letkf.f90 > Makefile.letkf
./fmkmf mean.f90 > Makefile.mean
./fmkmf obsope.f90 > Makefile.obsope
./fmkmf efso.f90 > Makefile.efso
